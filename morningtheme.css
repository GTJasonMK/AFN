/* Claude Theme for Typora */
/* 尽量贴近 Claude 风格版本 */

:root {
    /* Claude 官方配色 */
    --claude-primary: rgb(198, 97, 63);
    --claude-primary-hover: rgb(178, 77, 43);
    --claude-primary-light: rgba(198, 97, 63, 0.1);
    --claude-primary-lighter: rgba(198, 97, 63, 0.05);
    
    /* 背景和文字颜色 */
    --bg-color: #f1ede6;       /* 整体暖底，比页面略深 */
    --page-bg: #f7f3ee;        /* 中央编辑卡片背景 */
    --text-color: #2c2621;
    --text-secondary: #615e5a;
    --heading-color: #1a1714;
    
    /* 功能色 */
    --code-bg: #ebe4db;
    --border-color: #ddd9d3;
    --hover-bg: #e8e4df;
    --selected-bg: rgba(198, 97, 63, 0.12);
    --sidebar-bg: #ebe8e3;
    
    /* 其他 */
    --link-color: rgb(198, 97, 63);
    --shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
    --shadow-hover: 0 16px 40px rgba(0, 0, 0, 0.1);
}

html {
    font-size: 16px;
}

body {
    //font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Arial, sans-serif;
	font-family: "Charter", "Bitstream Charter", "Sitka Text", "Cambria", "Georgia", "PingFang SC", "Microsoft YaHei", serif;
	font-feature-settings: "lnum"; /* lnum 代表 Lining Numerals */
    color: var(--text-color);
    line-height: 1.75;
    background-color: var(--bg-color);
    letter-spacing: 0.015em;
    padding: 0;
    margin: 0;
    font-weight: 400;
}

/* 中央编辑区域做成 Claude 风格卡片 */
#write {
    max-width: 860px;
    margin: 40px auto 120px;
    padding: 40px 60px 60px;
    background: var(--page-bg);
    border-radius: 14px;
    box-shadow: var(--shadow);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ==================== 标题样式 ==================== */
h1, h2, h3, h4, h5, h6 {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    color: var(--heading-color);
    font-weight: 600;
    line-height: 1.35;
    margin-top: 1.8em;
    margin-bottom: 0.75em;
    letter-spacing: -0.01em;
}

h1 {
    font-size: 2.1em;
    font-weight: 700;
    margin-top: 0.5em;
    padding-bottom: 0.4em;
    border-bottom: 1px solid var(--border-color);
}

h2 {
    font-size: 1.65em;
    font-weight: 650;
    margin-top: 1.6em;
}

h3 {
    font-size: 1.35em;
    font-weight: 600;
}

h4 {
    font-size: 1.15em;
    font-weight: 600;
}

h5 {
    font-size: 1em;
    font-weight: 600;
}

h6 {
    font-size: 0.95em;
    font-weight: 600;
    color: var(--text-secondary);
}

/* ==================== 段落和文本 ==================== */
p {
    margin: 0.9em 0 1.1em;
    line-height: 1.75;
}

/* 链接：更接近 Claude 的轻量虚线下划线 */
a {
    color: var(--link-color);
    text-decoration: none;
    transition: all 0.2s ease;
    border-bottom: 1px dotted rgba(198, 97, 63, 0.55);
}

a:hover {
    border-bottom-style: solid;
    border-bottom-color: var(--link-color);
}

/* 粗体和斜体 */
strong {
    font-weight: 600;
    color: var(--heading-color);
}

em {
    font-style: italic;
    color: var(--text-color);
}

/* ==================== 列表 ==================== */
#write ol,
#write ul {
    list-style-position: outside;
    padding-left: 1.6em; /* 略微收紧缩进 */
    margin: 1em 0;
}

#write ol {
    list-style-type: decimal;
}

#write ul {
    list-style-type: disc;
}

#write li {
    margin: 0.3em 0;
    line-height: 1.7;
}

#write li > ul,
#write li > ol {
    margin: 0.4em 0;
}

#write li > *:first-child {
    margin-top: 0;
}

#write li > *:last-child {
    margin-bottom: 0;
}

/* 列表标记颜色 */
#write ul > li::marker {
    color: var(--text-color);
}

#write ol > li::marker {
    color: var(--text-color);
    font-weight: 500;
}

/* ==================== 引用块 ==================== */
blockquote {
    border-left: 3px solid var(--claude-primary);
    background: var(--code-bg);
    padding: 1em 1.2em;
    margin: 1.5em 0;
    border-radius: 0 6px 6px 0;
    color: var(--text-secondary);
    font-style: italic;
}

blockquote p {
    margin: 0.5em 0;
}

blockquote p:first-child {
    margin-top: 0;
}

blockquote p:last-child {
    margin-bottom: 0;
}

/* ==================== 代码 ==================== */
code {
    font-family: "SF Mono", "Monaco", "Cascadia Code", "Roboto Mono", "Menlo", "Consolas", "Courier New", monospace;
    background-color: var(--code-bg);
    padding: 3px 6px;
    border-radius: 3px;
    font-size: 0.88em;
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

pre.md-fences {
    position: relative;
    background-color: var(--code-bg);
    border-radius: 10px;
    padding: 1.2em 1.4em;
    margin: 1.5em 0;
    font-size: 0.88em;
    line-height: 1.6;
    box-shadow: var(--shadow);
    border: none;
}

pre.md-fences code {
    background-color: transparent;
    padding: 0;
    border: none;
}

/* 代码块语言标签：顶部右上角胶囊样式 */
.md-fences .code-tooltip {
    position: absolute;
    top: 5px;
    right: 55px;
    background-color: rgba(0, 0, 0, 0.16);
    color: white;
    border-radius: 999px;
    padding: 2px 10px;
    font-size: 0.72em;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    height: 22px;
}

/* ==================== 表格 ==================== */
table {
    margin: 1.5em 0;
    border-collapse: collapse;
    width: 100%;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

thead {
    background-color: var(--code-bg);
}

th {
    font-weight: 600;
    padding: 12px 16px;
    text-align: left;
    border-bottom: 2px solid var(--border-color);
    color: var(--heading-color);
}

td {
    padding: 10px 16px;
    border-bottom: 1px solid var(--border-color);
}

tr:last-child td {
    border-bottom: none;
}

tbody tr:hover {
    background-color: var(--hover-bg);
}

/* ==================== 分割线 ==================== */
hr {
    border: none;
    border-top: 2px solid var(--border-color);
    margin: 2.5em 0;
}

/* ==================== 图片 ==================== */
img {
    max-width: 100%;
    height: auto;
    border-radius: 6px;
    margin: 1.5em 0;
    box-shadow: var(--shadow);
}

/* ==================== 1. 修复 Checkbox 严重偏上问题 ==================== */
/* 采用“绝对定位”方案，这是解决错位的最稳妥方法 */

.task-list-item {
    position: relative;             /* 设置为定位基准 */
    padding-left: 26px !important;  /* 腾出左侧空间放置复选框 */
    list-style-type: none;
}

.task-list-item input[type="checkbox"] {
    position: absolute;             /* 绝对定位，彻底脱离文档流 */
    left: 2px;                      /* 固定在左侧 padding 区域内 */
    /* 垂直对齐核心计算：(行高 1.75em - 高度 1em) / 2 ≈ 0.375em */
    top: 0.35em;                    
    margin: 0 !important;           /* 清除默认边距干扰 */
    width: 16px;
    height: 16px;
    vertical-align: middle;
}

/* 强制清除复选框后文字段落的顶部边距，防止文字下沉 */
.task-list-item > p:first-child {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* ==================== 高亮 ==================== */
mark {
    background-color: rgba(198, 97, 63, 0.2);
    padding: 2px 4px;
    border-radius: 2px;
    color: var(--text-color);
}

/* ==================== TOC 目录 ==================== */
.md-toc {
    font-size: 0.95em;
    background-color: var(--code-bg);
    padding: 1.5em;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow);
}

.md-toc-content {
    margin: 0;
}

.md-toc-item {
    color: var(--text-color);
    line-height: 1.6;
}

.md-toc-inner {
    color: var(--text-color);
}

.md-toc-inner:hover {
    color: var(--claude-primary);
}

/* ==================== 侧边栏样式 ==================== */
#typora-sidebar {
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
}

.sidebar-content {
    background-color: var(--sidebar-bg);
}

/* 文件列表 */
.file-node-content {
    color: var(--text-color);
    padding: 6px 12px;
    border-radius: 5px;
    transition: all 0.2s ease;
    font-weight: 400;
}

.file-node-content:hover {
    background-color: var(--hover-bg);
}

.file-list-item.active .file-node-content,
.file-node-content.active {
    background-color: var(--claude-primary);
    color: white;
    font-weight: 500;
}

/* ==================== 大纲面板 (Compact Claude Style) ==================== */
/* 目标：减小 padding 和 line-height，实现更紧凑的视觉效果 */

.outline-content {
    font-size: 0.92em;
    line-height: 1.6; /* 保持容器行高，但由内部 label 调整文字行高 */
    padding: 10px !important; /* 维持一定的安全边距 */
}

/* 1. 大纲条目容器：减小边距，更紧凑 */
.outline-item {
    /* 关键调整：减少垂直和水平内边距 */
    padding: 4px 15px 4px 8px !important;    
    
    /* 减小外边距，让高亮色块更贴近侧边栏边缘 */
    margin-left: 4px !important;    
    margin-right: 4px !important;    
    margin-bottom: 1px !important;  /* 减小条目间距 */
    
    height: auto !important;        /* 确保高度自适应 */
    min-height: 24px;               /* 确保最小高度 */
    display: flex !important;        
    align-items: center;            /* 垂直居中对齐 */
    border-radius: 4px;
    /* transition: all 0.2s ease; */
}

/* 2. 大纲文字标签：减小行高，更紧凑 */
.outline-label {
    /* 关键调整：减小行高，实现更紧凑的文字排布 */
    line-height: 1.45 !important;    
    
    padding-top: 0 !important;      /* 确保没有多余的垂直 padding */
    padding-bottom: 0 !important;
    text-align: left !important;    
    white-space: normal !important; 
    word-break: break-all;          
    /* ---- 修复：默认文字颜色改为更柔和的次要文本色 ---- */
    color: var(--text-secondary);   
    
    /* 去除链接样式 */
    border-bottom: none !important;  
    text-decoration: none !important;
}

/* hover 效果保持浅灰 */
.outline-item:hover {
    background-color: var(--hover-bg);
	border-left: 0px transparent;
    border-right: 0px transparent
}

/* —— 重点：大纲选中节点使用 Claude 主题色 —— */

/* 选中行整体背景 */
.outline-item-active > .outline-item-body,
.outline-item-active,
.ty-outline-item-active > .outline-item-body,
.ty-outline-item-active {
    background-color: var(--claude-primary) !important;
    border-radius: 4px;
}

/* 选中行文字颜色 */
.outline-item-active .outline-label,
.ty-outline-item-active .outline-label {
    color: #ffffff !important;
    font-weight: 500;
}

/* hover 时非选中项使用主色 */
.outline-item .outline-label {
    color: var(--text-color);
    transition: color 0.2s ease;
}

.outline-item:hover .outline-label {
    color: var(--claude-primary);
}

/* 选中项 hover 时仍保持白色 */
.outline-item-active .outline-label:hover,
.ty-outline-item-active .outline-label:hover {
    color: #ffffff !important;
}

/* 大纲展开/折叠图标 */
.outline-expander {
    color: var(--text-secondary);
}

.outline-expander:hover {
    color: var(--claude-primary);
}

/* —— 重点：大纲选中节点使用 Claude 主题色 —— */

/* 选中行整体背景（兼容多种 class） */
.outline-item-active > .outline-item-body,
.outline-item-active,
.ty-outline-item-active > .outline-item-body,
.ty-outline-item-active {
    background-color: var(--claude-primary) !important;
    border-radius: 4px;
}

/* 选中行文字颜色 */
.outline-item-active .outline-label,
.ty-outline-item-active .outline-label {
    color: #ffffff !important;
    font-weight: 500;
}

/* hover 时非选中项使用主色 */
.outline-item .outline-label {
    color: var(--text-color);
    transition: color 0.2s ease;
}

.outline-item:hover .outline-label {
    color: var(--claude-primary);
}

/* 选中项 hover 时仍保持白色 */
.outline-item-active .outline-label:hover,
.ty-outline-item-active .outline-label:hover {
    color: #ffffff !important;
}

/* 大纲展开/折叠图标 */
.outline-expander {
    color: var(--text-secondary);
}

.outline-expander:hover {
    color: var(--claude-primary);
}

/* ==================== 按钮样式 ==================== */
button,
.btn,
.ty-side-sort-btn {
    background-color: transparent;
    color: var(--text-color);
    border: 1px solid var(--border-color);
    padding: 6px 12px;
    border-radius: 4px;
    transition: all 0.2s ease;
}

button:hover,
.btn:hover,
.ty-side-sort-btn:hover {
    background-color: var(--hover-bg);
    border-color: var(--claude-primary);
    color: var(--claude-primary);
}

button:active,
.btn:active {
    background-color: var(--selected-bg);
}

/* 主要按钮 */
.btn-primary,
button.primary {
    background-color: var(--claude-primary);
    color: white;
    border: none;
}

.btn-primary:hover,
button.primary:hover {
    background-color: var(--claude-primary-hover);
    box-shadow: var(--shadow-hover);
}

/* ==================== 选中文本 ==================== */
::selection {
    background-color: rgba(198, 97, 63, 0.25);
    color: var(--heading-color);
}

::-moz-selection {
    background-color: rgba(198, 97, 63, 0.25);
    color: var(--heading-color);
}

/* ==================== 光标所在行 ==================== */
#write .md-focus {
    background-color: transparent;
}

/* ==================== 脚注 ==================== */
.footnotes {
    margin-top: 3em;
    padding-top: 1.5em;
    border-top: 2px solid var(--border-color);
    font-size: 0.9em;
    color: var(--text-secondary);
}

.footnotes-area {
    background-color: var(--code-bg);
    padding: 1em;
    border-radius: 6px;
}

sup.md-footnote {
    background-color: var(--claude-primary);
    color: white;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 0.75em;
}

/* ==================== 工具栏 ==================== */
#top-titlebar,
#megamenu-content {
    background-color: var(--sidebar-bg);
    border-bottom: 1px solid var(--border-color);
}

.megamenu-menu-panel {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-hover);
}

.megamenu-menu-item:hover {
    background-color: var(--hover-bg);
    color: var(--claude-primary);
}

/* ==================== 滚动条 ==================== */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--claude-primary);
}

/* ==================== 源代码模式 ==================== */
.cm-s-inner {
    background-color: var(--bg-color);
    color: var(--text-color);
}

.CodeMirror-gutters {
    background-color: var(--code-bg);
    border-right: 1px solid var(--border-color);
}

.CodeMirror-linenumber {
    color: var(--text-secondary);
}

.CodeMirror-cursor {
    border-left: 2px solid var(--claude-primary);
}

.cm-s-inner .cm-header {
    color: var(--heading-color);
    font-weight: 600;
}

.cm-s-inner .cm-link {
    color: var(--link-color);
}

.cm-s-inner .cm-strong {
    font-weight: 600;
}

/* ==================== 数学公式 ==================== */
.md-math-block {
    font-size: 1em;
    padding: 1em;
    background-color: var(--code-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin: 1.5em 0;
    box-shadow: var(--shadow);
}

mjx-container {
    overflow-x: auto;
    overflow-y: hidden;
}

/* ==================== 元数据块 ==================== */
pre.md-meta-block {
    background-color: var(--code-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 1em;
    font-size: 0.85em;
    color: var(--text-secondary);
    box-shadow: var(--shadow);
}

/* ==================== 文件树图标 ==================== */
.file-tree-node {
    padding: 2px 0;
}

.file-node-icon {
    color: var(--text-secondary);
}

/* ==================== 搜索高亮 ==================== */
.cm-search-hit {
    background-color: rgba(198, 97, 63, 0.3);
}

#md-searchpanel {
    background-color: var(--sidebar-bg);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-hover);
}

#md-searchpanel input {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

#md-searchpanel input:focus {
    border-color: var(--claude-primary);
    outline: none;
    box-shadow: 0 0 0 2px var(--claude-primary-light);
}

/* ==================== 文档优化 ==================== */
#write > h1:first-child,
#write > h2:first-child,
#write > h3:first-child {
    margin-top: 0;
}

/* ==================== 响应式设计 ==================== */
@media screen and (max-width: 1024px) {
    #write {
        padding: 30px 40px 80px;
        max-width: 100%;
        margin: 30px auto 80px;
    }
}

@media screen and (max-width: 768px) {
    #write {
        padding: 20px 20px 60px;
        margin: 20px auto 60px;
        border-radius: 0;
        box-shadow: none;
        background: var(--bg-color); /* 小屏可以直接铺满 */
    }
    
    h1 {
        font-size: 1.75em;
    }
    
    h2 {
        font-size: 1.45em;
    }
}

/* ==================== 打印样式 ==================== */
@media print {
    body {
        background-color: var(--bg-color);
    }
    
    #write {
        padding: 0;
        max-width: 100%;
        margin: 0;
        background: transparent;
        box-shadow: none;
        border-radius: 0;
    }
    
    a {
        color: var(--text-color);
        text-decoration: underline;
    }
    
    .sidebar-content,
    #typora-sidebar {
        display: none;
    }
}

/* ==================== 焦点样式 ==================== */
input:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: var(--claude-primary);
    box-shadow: 0 0 0 3px var(--claude-primary-light);
}

/* ==================== 链接卡片 ==================== */
.md-link-card {
    background-color: var(--code-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 1em;
    margin: 1em 0;
    transition: all 0.2s ease;
}

.md-link-card:hover {
    border-color: var(--claude-primary);
    box-shadow: var(--shadow-hover);
}

/* ==================== 其他优化 ==================== */
/* 嵌套列表缩进 */
#write ul ul,
#write ul ol,
#write ol ul,
#write ol ol {
    padding-left: 1.8em;
}

/* 标题锚点 */
h1 .md-anchor,
h2 .md-anchor,
h3 .md-anchor,
h4 .md-anchor,
h5 .md-anchor,
h6 .md-anchor {
    color: var(--claude-primary);
    opacity: 0;
    transition: opacity 0.2s ease;
}

h1:hover .md-anchor,
h2:hover .md-anchor,
h3:hover .md-anchor,
h4:hover .md-anchor,
h5:hover .md-anchor,
h6:hover .md-anchor {
    opacity: 1;
}

/* 提示框优化 */
.md-notification {
    background-color: var(--sidebar-bg);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-hover);
}

/* 加载动画 */
.ty-loading {
    color: var(--claude-primary);
}


/* ==================== 右键菜单高度和间隙统一修复 (基于 Padding) ==================== */

/* 0. 确保所有 li 元素本身没有外部间隙干扰 */
.dropdown-menu > li {
    margin: 0 !important;
    padding: 0 !important;
    height: auto !important; 
}

/* 1. 统一所有“功能文字项”的垂直间隙 */
/* 通过调整 a 标签的 padding 来控制垂直间隙，确保所有文字项高度视觉一致 */
.dropdown-menu > li > a {
    display: block;           /* 确保点击区域铺满整行 */
    line-height: 1.5 !important; /* 统一文字行高，保证文字部分对齐 */
    
    /* 【关键】通过 padding-top 和 padding-bottom 控制文字项上下的固定间隙 */
    padding: 6px 16px !important; /* 上下 6px 的内边距，左右 16px */
    
    /* 清除可能存在的样式干扰，保证高度由 padding 决定 */
    min-height: auto !important;
    height: auto !important;
    border: none !important;      
    box-sizing: border-box; /* 确保 padding 不增加盒子总高度 */
}

/* 2. 统一“分割线”的垂直间隙 */
.dropdown-menu > li.divider {
    height: 1px !important;                 /* 分割线这一行本身的物理高度 */
    
    /* 【关键】使用 margin 控制分割线与上下文字项的间隙，保持和文字项的间隙节奏一致 */
    margin: 7px 0 !important;             
    
    padding: 0 !important;        
    background-color: var(--border-color, #e5e5e5); 
    border: none !important;
    overflow: hidden;
    width: 100%;                  
}

.context-menu.dropdown-menu>.active>a, .context-menu.dropdown-menu>li>a:hover, .menu-style-btn.active{
	margin:5px;
}

#write div.md-toc-tooltip{
	top: -50px;
	right: 0px;
}